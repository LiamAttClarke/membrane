(function(t){function e(e){for(var a,s,r=e[0],l=e[1],c=e[2],u=0,d=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);h&&h(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],a=!0,r=1;r<i.length;r++){var l=i[r];0!==n[l]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=i[0]))}return t}var a={},n={app:0},o=[];function s(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=a,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="dist/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var h=l;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"034f":function(t,e,i){"use strict";i("85ec")},"120b":function(t,e,i){},"349b":function(t,e,i){"use strict";i("b58b")},5038:function(t,e,i){"use strict";i("873a")},"7af3":function(t,e,i){"use strict";i("120b")},"85ec":function(t,e,i){},"873a":function(t,e,i){},b58b:function(t,e,i){},cd49:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Grid",{attrs:{tiles:t.tiles,"tile-size":512,"tile-cells":16,time:t.time},on:{click:t.onGridClick}}),t._m(0)],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app__overlay"},[i("div",{staticClass:"top-left"},[i("h1",{staticClass:"app__heading"},[t._v("Membrane")]),i("span",{staticClass:"app__subheading"},[t._v(" inspired by "),i("a",{attrs:{href:"https://tixy.land/",target:"_blank"}},[t._v("tixy.land")])])])])}],s=i("d4ec"),r=i("bee2"),l=i("262e"),c=i("2caf"),h=i("9ab4"),u=i("1b40"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grid",class:{editing:t.isEditing},on:{wheel:t.onWheel}},[i("svg",{ref:"background",staticClass:"grid__background"},[i("defs",[i("pattern",{attrs:{id:"gridPattern",width:t.tileSize,height:t.tileSize,x:t.position.x,y:t.position.y,patternTransform:"scale("+t.zoom+")",patternUnits:"userSpaceOnUse"}},[i("rect",{staticClass:"grid__pattern",attrs:{x:0,y:0,width:t.tileSize,height:t.tileSize}})])]),i("rect",{staticClass:"grid__background",attrs:{width:"150%",height:"150%",fill:"url(#gridPattern)"}})]),i("div",{staticClass:"grid__foreground",style:{transform:"scale("+t.zoom+") translate("+t.position.x+"px, "+t.position.y+"px)"}},t._l(t.tiles,(function(e,a){return i("Tile",{key:a,ref:"tiles",refInFor:!0,attrs:{tile:e,position:t.getTilePosition(e),"grid-zoom":t.zoom,size:t.tileSize,cells:t.tileCells,time:t.time},on:{grab:function(){return t.onTileGrab(a)},release:function(e){return t.onTileRelease(a,e)}}})})),1)])},f=[],p=(i("7db0"),i("b255")),b=i("9393");function g(t,e,i){return Math.min(Math.max(e,t),i)}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.round(t/e)*e}var y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tile",class:{dragging:t.isDragging},style:{left:t.tilePosition.x+"px",top:t.tilePosition.y+"px"}},[i("canvas",{ref:"canvas",staticClass:"tile__canvas",attrs:{width:t.size,height:t.size}}),i("div",{staticClass:"tile__overlay",style:{borderRadius:t.cellWidth/2+"px"}},[i("header",[i("h3",{staticClass:"tile__name"},[t._v(t._s(t.tile.name))]),t.tile.authorLink?i("a",{staticClass:"tile__author",attrs:{href:t.tile.authorLink}},[t._v(" "+t._s(t.tile.author)+" ")]):i("span",{staticClass:"tile__author"},[t._v(t._s(t.tile.author))])]),i("input",{attrs:{type:"text"}})])])},O=[],m=(i("cb29"),"#FFE600"),j="#FFFFFF",M=.9,_=function(t){Object(l["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.dragHandler=null,t.dragOffset=new b["a"],t.context=null,t.paused=!1,t}return Object(r["a"])(i,[{key:"mounted",value:function(){this.dragHandler=new p["b"](this.$refs.canvas,{onDragGrab:this.onTileGrab.bind(this),onDragMove:this.onTileMove.bind(this),onDragCancel:this.onTileRelease.bind(this),onDragEnd:this.onTileRelease.bind(this)});var t=this.$refs.canvas;this.context=t.getContext("2d"),this.draw()}},{key:"clear",value:function(){this.context&&this.context.clearRect(0,0,this.size,this.size)}},{key:"draw",value:function(){if(this.context&&!this.paused){this.clear();for(var t=0;t<this.cells;t+=1)for(var e=0;e<this.cells;e+=1){var i=this.cellWidth/2,a=t*this.cellWidth+i,n=e*this.cellWidth+i,o=this.getCellValue(t,e),s=this.getCellRadius(o);this.context.beginPath(),this.context.arc(a,n,s,0,2*Math.PI,!1),this.context.fillStyle=o>0?j:m,this.context.fill()}}}},{key:"getCellValue",value:function(t,e){var i=this.tile.evaluate(this.cells,e*this.cells+t,t,e,this.time);return g(i,-1,1)}},{key:"getCellRadius",value:function(t){return Math.abs(t*M)*(this.cellWidth/2)}},{key:"onTileGrab",value:function(t){this.$emit("grab")}},{key:"onTileMove",value:function(t){var e=t.dragOffsetDelta;if(e){this.paused=!0;var i=e.multiplyByScalar(1/this.gridZoom);this.dragOffset=this.dragOffset.add(i)}}},{key:"onTileRelease",value:function(){this.clear(),this.paused=!1,this.$emit("release",this.dragOffset),this.dragOffset=new b["a"]}},{key:"cellWidth",get:function(){return this.size/this.cells}},{key:"tilePosition",get:function(){return this.position.add(this.dragOffset)}},{key:"isDragging",get:function(){var t;return(null===(t=this.dragHandler)||void 0===t?void 0:t.dragState)===p["a"].Dragging}}]),i}(u["c"]);Object(h["a"])([Object(u["b"])()],_.prototype,"tile",void 0),Object(h["a"])([Object(u["b"])()],_.prototype,"size",void 0),Object(h["a"])([Object(u["b"])()],_.prototype,"cells",void 0),Object(h["a"])([Object(u["b"])()],_.prototype,"position",void 0),Object(h["a"])([Object(u["b"])()],_.prototype,"gridZoom",void 0),Object(h["a"])([Object(u["b"])()],_.prototype,"time",void 0),Object(h["a"])([Object(u["d"])("time")],_.prototype,"draw",null),_=Object(h["a"])([u["a"]],_);var x=_,k=x,w=(i("349b"),i("2877")),z=Object(w["a"])(k,y,O,!1,null,"dbc1b016",null),T=z.exports,S=function(t){Object(l["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.position=new b["a"],t.zoom=1,t.dragHandler=null,t.isEditing=!1,t.isDragging=!1,t}return Object(r["a"])(i,[{key:"mounted",value:function(){this.dragHandler=new p["b"](this.$refs.background,{onDragMove:this.onGridMove.bind(this),onDragCancel:this.onGridClick.bind(this)})}},{key:"getGridPosition",value:function(t){return new b["a"](v(t.x,this.tileSize)/this.tileSize,v(t.y,this.tileSize)/this.tileSize)}},{key:"getTilePosition",value:function(t){return new b["a"](t.gridX*this.tileSize,t.gridY*this.tileSize)}},{key:"windowToView",value:function(t){var e=this.$refs.background,i=e.getBoundingClientRect();return t.subtract(new b["a"](i.left,i.top))}},{key:"zoomToTarget",value:function(t,e){var i=g(this.zoom+t,this.minZoom,this.maxZoom),a=e.multiplyByScalar(1/this.zoom),n=e.multiplyByScalar(1/i),o=n.subtract(a);this.zoom=i,this.position=this.position.add(o)}},{key:"getTileAtPosition",value:function(t,e){return this.tiles.find((function(i){return i.gridX===t&&i.gridY===e}))||null}},{key:"onWheel",value:function(t){t.deltaY&&this.zoomToTarget((t.deltaY>1?-1:1)*this.zoomSpeed,this.windowToView(new b["a"](t.clientX,t.clientY))),t.deltaX&&(this.position=this.position.add(new b["a"](-t.deltaX,0)))}},{key:"onGridClick",value:function(t){var e=t.pointerEvent,i=new b["a"](e.offsetX,e.offsetY);this.$emit("click",{event:e,gridPosition:this.getGridPosition(this.position.add(i))})}},{key:"onGridMove",value:function(t){var e=t.dragOffsetDelta;if(e){var i=e.multiplyByScalar(1/this.zoom);this.position=this.position.add(i)}}},{key:"onTileGrab",value:function(t){this.isEditing=!0}},{key:"onTileRelease",value:function(t,e){this.isEditing=!1;var i=this.tiles[t],a=this.getGridPosition(new b["a"](i.gridX+e.x,i.gridY+e.y)),n=this.getTileAtPosition(a.x,a.y);n||(i.gridX=a.x,i.gridY=a.y)}}]),i}(u["c"]);Object(h["a"])([Object(u["b"])()],S.prototype,"tiles",void 0),Object(h["a"])([Object(u["b"])()],S.prototype,"tileSize",void 0),Object(h["a"])([Object(u["b"])()],S.prototype,"tileCells",void 0),Object(h["a"])([Object(u["b"])()],S.prototype,"time",void 0),Object(h["a"])([Object(u["b"])({default:.1})],S.prototype,"minZoom",void 0),Object(h["a"])([Object(u["b"])({default:2})],S.prototype,"maxZoom",void 0),Object(h["a"])([Object(u["b"])({default:.1})],S.prototype,"zoomSpeed",void 0),S=Object(h["a"])([Object(u["a"])({components:{Tile:T}})],S);var C=S,P=C,G=(i("7af3"),Object(w["a"])(P,d,f,!1,null,"37d69b70",null)),E=G.exports,D=(i("99af"),i("b0c0"),i("b64b"),i("07ac"),i("4478")),R=i("2909"),$=(i("5327"),i("79a8"),i("9ff9"),i("3ea3"),i("40d9"),i("ff9c"),i("0ac8"),i("f664"),i("4057"),i("bc01"),i("6b93"),i("ca21"),i("90d7"),i("2af1"),i("0261"),i("7898"),i("b65f"),{E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,abs:Math.abs,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atanh:Math.atanh,atan2:Math.atan2,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,cos:Math.cos,cosh:Math.cosh,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,hypot:Math.hypot,imul:Math.imul,log:Math.log,log1p:Math.log1p,log10:Math.log10,log2:Math.log2,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sign:Math.sign,sin:Math.sin,sinh:Math.sinh,sqrt:Math.sqrt,tan:Math.tan,tanh:Math.tanh,trunc:Math.trunc}),L=["s","i","x","y","t"],B=function(){function t(e,i,a){Object(s["a"])(this,t),this.name="Base Tile",this.author="No Author",this.authorLink="http://example.com",this.gridX=e,this.gridY=i,this.functionBody=a}return Object(r["a"])(t,[{key:"evaluate",value:function(t,e,i,a,n){var o=Object.values($);return this.fn.apply(this,[t,e,i,a,n].concat(Object(R["a"])(o)))}},{key:"functionBody",get:function(){return this.fnBody},set:function(t){this.fnBody=t,this.fn=Object(D["a"])(Function,L.concat(Object(R["a"])(Object.keys($)),["return ".concat(t)]))}}]),t}(),F=60,X="sin(t)",Y=function(t){Object(l["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.tiles=[],t.time=Date.now(),t}return Object(r["a"])(i,[{key:"mounted",value:function(){var t=this;setInterval((function(){t.time=Date.now()/1e3}),1e3/F)}},{key:"onGridClick",value:function(t){this.tiles.push(new B(t.gridPosition.x,t.gridPosition.y,X))}}]),i}(u["c"]);Y=Object(h["a"])([Object(u["a"])({components:{Grid:E}})],Y);var W=Y,Z=W,H=(i("034f"),i("5038"),Object(w["a"])(Z,n,o,!1,null,"409d5f70",null)),I=H.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(I)}}).$mount("#app")}});
//# sourceMappingURL=app.b259755f.js.map